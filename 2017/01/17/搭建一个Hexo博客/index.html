<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>搭建一个Hexo博客 | WeaponX&#39;s Blog</title>
  <meta name="author" content="WeaponX">
  
  <meta name="description" content="Vulnerability|Security|Binary">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="搭建一个Hexo博客"/>
  <meta property="og:site_name" content="WeaponX&#39;s Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="WeaponX&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">WeaponX&#39;s Blog</a></h1>
  <h2><a href="/">Binary</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-01-17T17:25:56.000Z"><a href="/2017/01/17/搭建一个Hexo博客/">2017-01-17</a></time>
      
      
  
    <h1 class="title">搭建一个Hexo博客</h1>
  

    </header>
    <div class="entry">
      
        <h2 id="0x00-背景"><a href="#0x00-背景" class="headerlink" title="0x00 背景"></a>0x00 背景</h2><p>一直想搭建一个自己的博客，之前在Aliyun虚拟主机上搭了一个WordPress+MySQL的个人博客。后来维护成本太大，主机和域名都没有续费被回收了。最近再看别人在写，自己也想搞一个试试水。研究了几天，发现Hexo还真不错，所以就选了这个。</p>
<p>目前，博客搭建在coding.net上，使用万网的域名。</p>
<a id="more"></a>
<h3 id="Hexo介绍"><a href="#Hexo介绍" class="headerlink" title="Hexo介绍"></a>Hexo介绍</h3><p>Hexo是一款基于Node.js的博客框架，可以将Markdown格式的文本渲染为HTML代码。所以，博客基本就是纯静态，维护相对方便。但是缺点也很明显——经常换编写环境使用不便，因为它的所有渲染代码都是在本地存储的。</p>
<h2 id="0x01-选择域名和代码托管服务提供商"><a href="#0x01-选择域名和代码托管服务提供商" class="headerlink" title="0x01 选择域名和代码托管服务提供商"></a>0x01 选择域名和代码托管服务提供商</h2><blockquote>
<p>域名提供商是负责域名注册的服务机构，简称注册商，主要负责域名向域名管理局申请批准、域名维护更新、域名续费、域名解析等服务支持，选购域名需要找信誉比较好的服务商如卓汇互联，查询域名可以直接进入卓汇互联域名注册页面进行操作，域名种类较多，域名名称可选空间也较大。</p>
</blockquote>
<p>主要的域名提供商，国外有Godaddy、NameCheap等；国内的主要就是万网(Aliyun)，百度等。选择国外的域名提供商的好处在不用进行国内备案相关的手续，但是就是贵。Godaddy注册的域名首年优惠力度很大，但是续费的时候基本没有什么优惠了，基本100多一年。国内的万网基本首年几块到几十块的都有，续费基本在40以下；但是国内的政策还不明朗，有可能需要繁琐的备案手续。</p>
<p>代码托管服务提供上国外基本就是大家熟知的Github，国内就是coding.net(原Gitcafe)。选择国内的coding.net很简单，就是快。由于Github在国内没有服务器，所以同步代码和访问速度感人。</p>
<h2 id="0x02-下载Hexo"><a href="#0x02-下载Hexo" class="headerlink" title="0x02 下载Hexo"></a>0x02 下载Hexo</h2><p>Hexo是基于Node.js编写的，所以首先需要下载Node.js。使用命令<br><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">sudo apt-get install nodejs</div></pre></td></tr></table></figure></p>
<p>Node.js默认使用的是国外的源，速度非常感人，所以需要我们切换到国内的源，这里我使用taobao的源。<br><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">npm config <span class="built_in">set</span> registry http://registry.npm.taobao.org/</div></pre></td></tr></table></figure></p>
<p>使用npm来下载Hexo<br><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">sudo npm install -g hexo-cli</div></pre></td></tr></table></figure></p>
<p>输入hexo，如果出现下列提示，则说明安装成功了。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">Usage: hexo &lt;<span class="built_in">command</span>&gt;</div><div class="line"></div><div class="line">Commands:</div><div class="line">  clean     Removed generated files and cache.</div><div class="line">  config    Get or <span class="built_in">set</span> configurations.</div><div class="line">  deploy    Deploy your website.</div><div class="line">  generate  Generate static files.</div><div class="line">  <span class="built_in">help</span>      Get <span class="built_in">help</span> on a command.</div><div class="line">  init      Create a new Hexo folder.</div><div class="line">  list      List the information of the site</div><div class="line">  migrate   Migrate your site from other system to Hexo.</div><div class="line">  new       Create a new post.</div><div class="line">  publish   Moves a draft post from _drafts to _posts folder.</div><div class="line">  render    Render files with renderer plugins.</div><div class="line">  server    Start the server.</div><div class="line">  version   Display version information.</div><div class="line"></div><div class="line">Global Options:</div><div class="line">  --config  Specify config file instead of using _config.yml</div><div class="line">  --cwd     Specify the CWD</div><div class="line">  --debug   Display all verbose messages <span class="keyword">in</span> the terminal</div><div class="line">  --draft   Display draft posts</div><div class="line">  --safe    Disable all plugins and scripts</div><div class="line">  --silent  Hide output on console</div><div class="line"></div><div class="line">For more <span class="built_in">help</span>, you can use <span class="string">'hexo help [command]'</span> <span class="keyword">for</span> the detailed information</div><div class="line">or you can check the docs: http://hexo.io/docs/</div></pre></td></tr></table></figure>
<p>如果显示缺少模块</p>
<h2 id="0x03-创建Blog"><a href="#0x03-创建Blog" class="headerlink" title="0x03 创建Blog"></a>0x03 创建Blog</h2><p>使用命令创建一个博客环境</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">hexo init <span class="string">"名字"</span></div></pre></td></tr></table></figure>
<p>cd进入这个目录，可以看到相关文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">~ ls</div><div class="line">_config.yml  db.json  node_modules  package.json  scaffolds  <span class="built_in">source</span>  themes</div></pre></td></tr></table></figure>
<p>博客的配置文件为<em>_config.yml</em>，配置文件的相关说明<em><a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">https://hexo.io/zh-cn/docs/configuration.html</a></em>。</p>
<p>运行测试环境</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">hexo server</div></pre></td></tr></table></figure>
<p>默认端口是4000，访问4000端口可以看博客的效果</p>
<p><img src="http://i.imgur.com/r4zSv7Z.png" alt=""></p>
<p>虽然Hexo的默认主题也算好看，但是功能等其他方面可能不尽如人意。好在Hexo提供的很多第三方主题<em><a href="https://hexo.io/themes/" target="_blank" rel="external">https://hexo.io/themes/</a></em>。关于主题的安装方法按照作者提供的方法就好了。</p>
<h2 id="0x04-部署到代码托管平台"><a href="#0x04-部署到代码托管平台" class="headerlink" title="0x04 部署到代码托管平台"></a>0x04 部署到代码托管平台</h2><p>在代码托管平台注册就不再详细阐述，主要说明如何创建一个项目。</p>
<h3 id="1-Github上创建项目"><a href="#1-Github上创建项目" class="headerlink" title="1.Github上创建项目"></a>1.Github上创建项目</h3><p>首先选择<em>New repository</em>，然后在<em>Repositiry Name</em>中填写<em>YourID.github.io</em>，例如我的id是weaponx，则需要在<em>Respository Name</em>中填写<em>weaponx.github.io</em>。</p>
<h3 id="2-Coding-net上创建项目"><a href="#2-Coding-net上创建项目" class="headerlink" title="2.Coding.net上创建项目"></a>2.Coding.net上创建项目</h3><p><img src="http://i.imgur.com/WriZm02.png" alt=""></p>
<p>项目名称可以任意填写，一定选择<em>公开</em>不要选成<em>私有</em>了。</p>
<h3 id="3-配置Hexo"><a href="#3-配置Hexo" class="headerlink" title="3.配置Hexo"></a>3.配置Hexo</h3><p>修改Hexo的配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">deploy:</div><div class="line">  <span class="built_in">type</span>: git</div><div class="line">  repo:</div><div class="line">      coding: https://git.coding.net/YOURID/YOURRESPOSIROTY.git,master</div><div class="line">      github: https://github.com/YOURID/YOURRESPOSITORY.github.io.git,master</div></pre></td></tr></table></figure>
<p>然后使用命令同步上去即可</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">hexo deploy -g</div></pre></td></tr></table></figure>
<h2 id="0x05-将域名解析到代码托管平台"><a href="#0x05-将域名解析到代码托管平台" class="headerlink" title="0x05 将域名解析到代码托管平台"></a>0x05 将域名解析到代码托管平台</h2><p>DNS服务提供商这里选择DNSPod。因为域名是在万网注册的，默认使用万网的DNS，所以需要切换到DNSPod。</p>
<p><img src="http://i.imgur.com/VvAHTu1.png" alt=""></p>
<p>在修改为非万网DNS中填写DNSPod提供的dns服务器。然后进入DNSPod管理页面添加网址，并添加CNAME解析。</p>
<h3 id="1-解析到Github"><a href="#1-解析到Github" class="headerlink" title="1.解析到Github"></a>1.解析到Github</h3><p>在Github上添加域名解析，首先要在项目中创建一个文件<em>CNAME</em>，文件的内容为域名，以我的域名为例文件内容为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">weaponx.site</div></pre></td></tr></table></figure>
<p>然后在DNSPod中创建解析，记录类型选择<em>CNAME</em>，记录值选择<em>YOURID.github.io</em>，主机记录输入@。再添加一样的条目，主机记录输入<strong>*</strong>。<br>在这里解释一下<strong>@</strong>记录，意思就是空。用我的域名为例，<strong>@</strong>记录指的是<em>weaponx.site</em>。<strong>*</strong>记录是任意，可以把xxx.weaponx.site解析到我的Github Pages上。</p>
<p>到这，域名就可以正确的解析到Github pages上了。</p>
<h3 id="2-解析到Coding-net"><a href="#2-解析到Coding-net" class="headerlink" title="2.解析到Coding.net"></a>2.解析到Coding.net</h3><p>解析到Coding.net上就比较简单，只需要做一个简单的设置即可。</p>
<p><img src="http://i.imgur.com/kNnGIM2.png" alt=""></p>
<h2 id="0x06-使用评论插件"><a href="#0x06-使用评论插件" class="headerlink" title="0x06 使用评论插件"></a>0x06 使用评论插件</h2><p>因为我们的Hexo博客是纯静态的，所以评论需要依赖与评论服务提供商。主流的服务提供商有Disqus(国外)，duoshuo(多说，国内)。因为一些大家知道的原因，Disqus已经访问不了了。其实这也是一种优势，可以过滤掉一些垃圾评论内容(广告)，提高评论质量。</p>
<p>多说由于是国内的厂商，速度很快。但是经常大姨妈，而且没有有效的反垃圾措施。所以我暂时使用Disqus作为我的评论插件。</p>
<h2 id="过程中踩过的坑"><a href="#过程中踩过的坑" class="headerlink" title="过程中踩过的坑"></a>过程中踩过的坑</h2><ul>
<li>文章的摘要，在文章摘要上加一行代码</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">&lt;!-- more --&gt;</div></pre></td></tr></table></figure>
<ul>
<li>多个Tag需要这样表示</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">tags:</div><div class="line">- tag1</div><div class="line">- tag2</div><div class="line">- tag3</div></pre></td></tr></table></figure>
<p>而不是<br><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">tags: tag1, tag2, tag3</div></pre></td></tr></table></figure></p>
<ul>
<li>代码高亮：通常在Markdown语法中代码高亮是使用Tab或者四个空格来表示，但是经过测试Hexo无法识别这种高亮方式，只能使用</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><div class="line">```python</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"Code Highlight test"</span></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    run()</div><div class="line">```</div></pre></td></tr></table></figure>
<ul>
<li>每次提交会删除CNAME文件，在source文件夹下创建一个CNAME文件就好，404.html同理。</li>
</ul>

      
    </div>
    <footer>
      
        
          <p style="border-top: #e0e0e0 1px dashed; border-right: #e0e0e0 1px dashed; border-bottom: #e0e0e0 1px dashed; border-left: #e0e0e0 1px dashed; padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 110px; background: url(http://i.creativecommons.org/l/by-nc-sa/2.5/cn/88x31.png) #e5f1f4 no-repeat 1% 50%; font-family: 微软雅黑; font-size:11px;" id="PSignature">  
作者：<a href="http://weaponx.site">WeaponX</a>
<br>出处：<a href="http://weaponx.site/2017/01/17/搭建一个Hexo博客/">http://weaponx.site/2017/01/17/搭建一个Hexo博客/</a>           
<br>本文采用<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/cn/" rel="license">知识共享署名-非商业性使用-相同方式共享 2.5 中国大陆许可协议</a>进行许可，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接。
</p>

        
        
  
  <div class="categories">
    <a href="/categories/tech/">技术</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/博客/">博客</a>, <a href="/tags/Hexo/">Hexo</a>
  </div>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:weaponx.site">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/tech/">技术</a><small>3</small></li>
  
    <li><a href="/categories/life/">生活</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/Hash/">Hash</a><small>1</small></li>
  
    <li><a href="/tags/Hexo/">Hexo</a><small>3</small></li>
  
    <li><a href="/tags/MD5/">MD5</a><small>1</small></li>
  
    <li><a href="/tags/SHA1/">SHA1</a><small>1</small></li>
  
    <li><a href="/tags/博客/">博客</a><small>3</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">友情链接</h3>
  <ul class="entry">
  
    <li><a href="http://example.com">测试友情链接</a></li>
  
  </ul>
</div>


</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2017 WeaponX
  
</div>
<div class="clearfix"></div></footer>
  <script src="http://apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'weaponx';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>
